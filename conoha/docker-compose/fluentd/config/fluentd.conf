<source>
    @type tail
    path /rootfs/var_log/syslog
    pos_file /fluentd/pos_file/tail.rootfs.syslog
    tag tail.rootfs.syslog
    format syslog
    read_from_head true
</source>

<match fluent.**>
    @type copy
    <store>
        @type retag
        add_prefix out
    </store>
    <store>
        @type retag
        add_prefix kafka
    </store>
</match>

<match tail.**>
    @type copy
    <store>
        @type retag
        remove_prefix tail
        add_prefix out
    </store>
    <store>
        @type retag
        remove_prefix tail
        add_prefix kafka
    </store>
</match>

<match out.**>
    @type stdout
    output_type json
</match>

<match kafka.**>
    @type kafka_buffered
    brokers 3ends.info:9092
    default_topic from_fluentd
    get_kafka_client_log true
</match>
