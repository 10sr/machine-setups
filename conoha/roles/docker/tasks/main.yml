---
- include: install.yml

- apt:
    name: python3-pip
  become: yes

- pip:
    name: "{{ item }}"
    executable: /usr/bin/pip3
  with_items:
    - docker
    - docker-compose
  become: yes

- file:
    path: "/root/docker-compose-test/{{ item.name }}"
    state: directory
    recurse: yes
  with_items: "{{ compose_templates }}"
  become: yes

- template:
    src: "{{ item.src }}"
    dest: "/root/docker-compose-test/{{ item.name }}/docker-compose.yml"
  with_items: "{{ compose_templates }}"
  become: yes
