GCP Ansible
===========


Setup Connection
----------------

事前準備として Google Cloud Platform の Web UI で以下の手順を行う。


### Serviceaccount の設定

プロジェクトについて一度行う。

1. 「VM インスタンス」のページから、 VM に紐ついたサービスアカウントを確認する
2. 「IAM と管理」の「サービスアカウント」から、確認したサービスアカウントをクリックする
3. 「キー」の「鍵を追加」から、「新しい鍵を作成」をクリックする
4. 「キーのタイプ」に「JSON」を選択し、作成する
5. JSON がダウンロードできるので、このディレクトリに `pp.sa.json` という名前で保存する


### インスタンス共通の公開鍵の設定

Ansible を実行するホストごとに行う。

1. 「Compure Engine」の「メタデータ」をクリックする
2. 「SSH 認証鍵」から「編集」をクリックする
3. 実行しようとしているマシンの公開鍵を入力し、ユーザ名を設定して保存をクリックする
